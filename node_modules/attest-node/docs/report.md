
Attest Report API
===================
Attest-report is used to save results from test runs using aXe or Attest. After doing a number of test runs, attest-report can generate the results. To create a test reporter run attest.report().

.report(testCaseName[, dirPath])
--------------------------
The report call takes two variables, the name of the test and the directory in which it should be stored. If no directory is passed, the testName will be used for this instead. A test directory can contain results from multiple tests. This provides additional options for grouping test results.

- Arguments:
  - `testCaseName`: The name of the current test case
  - `dirPath` (optional): Path in which test results should be stored
- Return: `reporter`: An object with methods to save test results and create reports

Example:

```javascript
var attest = require('attest-node')();

var dqReporter = attest.report('deque.com', './deque-a11y-tests');
var dquReporter = attest.report('dequeuniversity.com', './deque-a11y-tests');
```

reporter.logTestResult(id, findings[, options])
-----------------------------------------------
After creating a reporter, the results of a test can be stored using `.logTestResult()`. This takes the results from aXe or Attest and saves them in a JSON file which can later be used to create a report. The format is documented in [format.md].

- Arguments:
  - `id`: Identifier for the tested results
  - `results`: results as returned by aXe / Attest. These must be in the default output format
  - `options` (optional): An object any of the following
    - fileName: What file was tested or in what file was the test executed
    - state: The state the test subject was in during the test run
    - lineNumber: At what line was the test executed
    - testMachine: On what machine was the test executed
    - userAgent: With which browser or other user agent did the test run

```javascript
browser.get('http://www.deque.com/about-us/')
.then(includeAttest)
.then(function (attest) {
    attest.analyze(function(results) {
        // Store the results for the homepage
        dqReporter.logTestResult('about', results);
    });
});
```

Reporter
--------
Attest reporter can create three types of reports: HTML and JUnit XML. These can be created either either using the reporters .build commands, or using the command line tool (see below).

### reporter.buildHTML(path[, userAgent])

Create an HTML report from the test results. This will include all test results stored in the directory defined set for the reporter. Tests are grouped by name into test cases. Each test case is reported in a separate HTML file, linked together.

- arguments:
  - path: Directory in which the report will be saved
  - userAgent (optional): Only use results for this userAgent

### reporter.buildJUnitXML(path[, userAgent])

Create a JUnit XML report for the test results. This will include all test cases stored in the directory defined set for the reporter. Test results are grouped by name test case, and each group is reported in a separate package. The JUNit XML results can be imported by tools such as Jenkins.

- arguments:
  - path: Directory in which the report will be saved
  - userAgent (optional): Only use results for this userAgent

Attest Report CLI
===================
The attest-report CLI can be used to convert the JSON test results to a report. Usage: `attest-report <path/to/json/dir> [options]`

Options
--------

| Option                | Description
|-----------------------|----------------------------
| -h, --help            | output usage information
| -V, --version         | output the version number
| -b --browser [name]   | specify which browser's results should be used to generate the output
| -d --dest [path]      | specify the desired output path
| -f --format [type(s)] |  Format(s) for output: html (default), junit (xml)


For example, the following command can be used in npm posttest to to the JSON results from the ./a11y-results folder, and create an html and a junit xml report in the ./a11y-reports folder.

```
$ attest-report ./a11y-results --dest ./a11y-reports --format html+junit
```
