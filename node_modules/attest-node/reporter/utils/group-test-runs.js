var grouptestResults = function(testResults) {
    var grouping = testResults.reduce(function(grouping, testResult) {
        if (testResult.type !== 'attest-result') { // skip
            return grouping;
        }

        if (!grouping[testResult.name]) {
            grouping[testResult.name] = {
                testResults: [],
                name: testResult.name
            };
        }
        grouping[testResult.name].testResults.push(testResult);
        return grouping;
    }, {});

    return Object.keys(grouping).map(function(groupName) {
        return grouping[groupName];
    });
};

module.exports = grouptestResults;
