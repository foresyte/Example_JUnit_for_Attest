
mixin ruleResult(name, data)
  .result.panel.panel-primary
    .panel-heading
      h4 #{data.id}
        if (data.tags && data.tags.length)
          each tag in data.tags
            span.badge #{tag}
          small #{name}

    .panel-body
      h5.bold Description
      p #{data.description}

      h5.bold Help
      p #{data.help}
        | (
        a(href="#{data.helpUrl}" target="_blank") More info
        | )

      h5.bold Nodes
        | (#{data.nodes.length})&nbsp;
        button.toggle-nodes

      each node, i in data.nodes
        .node.panel.panel-default.hide
          .panel-heading Node ##{i + 1}
          .panel-body
            div
              span.bold Target:&nbsp;
              span #{node.target.join(', ')}
            div
              span.bold HTML:&nbsp;
              span #{node.html}
            div
              if node.failureSummary
                span.bold Failure Summary:&nbsp;
                span #{node.failureSummary}
              else
                ul
                  each failureType in ['any', 'all', 'none']
                    if node[failureType] && node[failureType].length
                      li
                        span Ensure
                        span.bold= ' ' + failureType + ' '
                        span of the following:

                        each failure in node[failureType]
                          ul(style="margin-top: 5px;")
                            each prop in ['id', 'message', 'relatedNodes']
                              if prop != 'relatedNodes'
                                li
                                  span.bold= prop + ': '
                                  span= failure[prop]

                              else if prop == 'relatedNodes' && failure[prop].length
                                li
                                  span.bold related nodes:
                                  each relatedNode in failure[prop]
                                    ul(style="margin-top: 5px;")
                                      li= relatedNode.html
                                      li= relatedNode.target
